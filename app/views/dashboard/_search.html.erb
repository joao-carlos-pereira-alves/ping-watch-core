<%= form_for dashboard_index_path,
             method: :get,
             html: {
               data: {
                 turbo_frame: 'dashboard',
                 turbo_action: 'advance',
                 controller: 'form',
                 action: 'input->form#submit'
               }
             } do %>
  <div class="row g-3">
    <div class="col-md-6">
      <%= label_tag :por_data, nil, class: 'form-label' %>

      <%= select_tag :by_date, by_date_options, class: 'form-control' %>
    </div>

    <div class="col-md-6">
      <%= label_tag :por_site, nil, class: 'form-label' %>

      <%= text_field_tag :by_site_domain, params[:by_site_domain].presence, class: 'form-control', placeholder: 'Digite um domÃ­nio...' %>
    </div>
  </div>
<% end %>

<script>
  // Debounce
  document.addEventListener("DOMContentLoaded", function() {
    let timeout;
    
    const inputField = document.getElementById("by_site_domain_input");
    
    inputField.addEventListener("input", function() {
      clearTimeout(timeout);
      
      timeout = setTimeout(function() {
        document.querySelector('form').submit();
      }, 500);
    });
  });
</script>